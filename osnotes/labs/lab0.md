## 设计思路
- 环境: Windows/Linux
- 源码阅读工具: understand
- 源码文档自动生成工具: Doxygen
- 编译环境: gcc, make, Binutils
- 真实/虚拟运行环境: X86机器或QEMU
- 调试工具: 改进的QEMU+(GDB or IDE)
- IDE工具: Eclipse0-CDT

## LAB 1-8
- Lab1: Bootloader/Interrupt/Device Driver
- Lab2: 物理内存管理
	- x86分段/分页模式, 了解操作系统怎样管理物理内存
- Lab3: 虚拟内存管理
	- 页表机制和换出(swap)机制, 以及中断-"故障中断"和缺页故障处理等, 基于页的内存替换算法
		- 软硬件协同
		- 实现虚拟内存的Page Fault异常处理
		- 实现页替换算法
- Lab4: 内核线程管理
	- 创建内核态进程, 如何对内核态线程进行管理
		-	建立内核线程的关键信息
		- 实现内核线程的管理方法
- Lab5: 用户进程管理
	- 了解用户进程创建执行切换和结束的动态管理过程, 了解在用户态通过系统调用得到内核态的内核服务的过程
		- 建立用户进程的关键信息
		- 实现用户进程管理
		- 分析进程和内存管理的关系
		- 实现系统调用的处理过程
- Lab6: 进程调度
	- 理解操作系统的调度过程和调度算法
		- 熟悉ucore的系统调度器框架, 以及内置的Round-Robin调度算法
		- 基于调度器框架实现一个调度器算法
- Lab7: 同步互斥
	- 了解进程间的信息交换和共享, 并了解同步互斥的具体实现以及对系统性能的影响, 研究死锁产生的原因, 以及如何避免死锁
		- 熟悉ucore的同步互斥机制
		- 理解基本的spinlock, semphpore, variable的实现
		- 用各种同步机制解决同步问题
		- 哲学家问题
- Lab8: 文件系统
	- 了解文件系统的具体实现, 与进程管理的关系, 了解缓存对操作系统IO访问的性能改进, 了解虚拟文件系统(VFS),	buffer cache 和 disk drive的关系
		- 掌握基本的文件系统系统调用的实现方法
		- 了解一个基于索引节点组织方式的Simple FS文件系统
		- 了解文件系统系统抽样层-VFS的设计和实现
- 扩展实验QAQ
 - x86-64
 - ARM
 - GO programming
 - 新文件系统
 - ...

## 实验环境

### 安装实验环境
- ubuntu 虚拟机

### 使用实验工具
- shell命令: ls, cd, rm, pwd, mkdir, find
	- bash
- 系统维护工具: apt, git
- 源码阅读与编辑工具: Eclipse-CDT, understand, gedit, **vim** 
- 源码比较工具: diff, meld
- 开发编译调试工具: **gcc**, gdb, make
- 硬件模拟器: **qemu**

### 了解x86-32硬件

#### Intel 80386 运行模式概述
- 四种运行模式:实模式/保护模式/SMM模式和虚拟8086模式
- 实模式: 80386加电启动后处于实模式运行状态, 这种状态下软件可以访问的物理内存空间不超过1MB, 且无法发挥Intel 80386以上级别的32位CPU的4GB内存管理能力
- 保护模式: 支持内存分页机制, 提供了对虚拟内存的良好支持. 此模式下80386支持多任务, 支持优先级制, 不同程序运行在不同的优先级上, 优先级共分0~34个级别, 操作系统运行在最高的优先级0上, 应用程序则运行在比较低的级别上; 配合良好的检查机制后, 既可以在任务间实现数据的安全共享也可以很好的隔离各个任务

#### Intel 80386 内存架构概述
- 地址是访问内存空间的索引
- 80386是32位的处理器, 即可以寻址的物理内存地址为2^32=4G字节
- 物理内存地址空间 是处理器提交到总线上用于访问计算机系统中的内存和外设的最终地址. 一个计算机系统只有一个物理地址空间
- 线性地址空间 是在操作系统的虚存管理之下每个运行的应用程序能访问的地址空间. 每个运行的应用程序都认为自己独享整个计算机系统的地址空间, 这样可以让多个运行的应用程序之间相互隔离
- 逻辑地址空间是应用程序直接使用的地址空间
- 段机制启动 页机制启动: 逻辑地址->段机制处理->线性地址=物理地址
- 段机制和页机制都启动: 逻辑地址->段机制处理->线性地址->页机制处理->物理地址

#### Intel 80386 寄存器概述
80386的寄存器可以分为8组:
- 通用寄存器
	- EAX: 累加器
	- EBX: 基址寄存器
	- ECX: 计数器
	- EDX: 数据寄存器        
	- ESI: 源地址指针寄存器  
	- EDI: 目的地址指针寄存器
	- EBP: 基址指针寄存器
	- ESP: 堆栈指针寄存器
- 段寄存器
	- CS: 代码段(Code Sgement)
 	- DS: 数据段(Data Segment)
 	- ES: 附加数据段(Extra Segment)
 	- SS: 堆栈段(Stack Segment)
 	- FS: 附加段
 	- GS: 附加段
- 指令指针寄存器
	- EIP: 指令寄存器
	- EFLAGS: 标志寄存器
		- IF(Interrupt Flag) 中断允许标志
		- CF, PF, ZF...
- 标志寄存器
- 控制寄存器
- 系统地址寄存器/调试寄存器/测试寄存器

### 了解ucore
- **面向对象编程方法** 
`/lab2/kern/mm/pmm.h`
- 通用数据结构
	- ucore的双向链表结构定义
	- le2page 头指针寻址

